<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Startup Code for Arm | Mehmet Bozdal</title> <meta name="author" content="Mehmet Bozdal"> <meta name="description" content="The startup code in an embedded system plays a vital role in initializing the hardware and setting up the execution environment upon system power-on or reset."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha256-DF7Zhf293AJxJNTmh5zhoYYIMs2oXitRfBjY+9L//AY=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.4/css/all.min.css" integrity="sha256-mUZM63G8m73Mcidfrv5E+Y61y7a12O5mW4ezU3bxqW4=" crossorigin="anonymous"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/academicons@1.9.1/css/academicons.min.css" integrity="sha256-i1+4qU2G2860dGGIOJscdC30s9beBXjFfzjWLjBRsBg=" crossorigin="anonymous"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/github.css" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css"> <link rel="canonical" href="https://mbozdal.github.io/blog/2023/startup/"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/jwarby/jekyll-pygments-themes@master/native.css" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js"></script> <script src="/assets/js/dark_mode.js"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Mehmet </span>Bozdal</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">About</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">Blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">Publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/teaching/">Teaching</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">Projects</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Startup Code for Arm</h1> <p class="post-meta">July 13, 2023</p> <p class="post-tags"> <a href="/blog/2023"> <i class="fas fa-calendar fa-sm"></i> 2023 </a>   ·   <a href="/blog/tag/embedded"> <i class="fas fa-hashtag fa-sm"></i> embedded</a>   </p> </header> <article class="post-content"> <p>The startup code in an embedded system plays a vital role in initializing the hardware and setting up the execution environment upon system power-on or reset. It is typically written in assembly or C languages and executed before the main function. The startup code for the STM32F107 microcontroller, provided below, configures low-level hardware specific to the architecture.</p> <p>The startup code performs several essential tasks:</p> <ol> <li> <p><strong>Stack Setup:</strong></p> <p>The provided code segment defines the stack size and allocates memory for the stack.</p> <div class="language-nasm highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="no">Stack_Size</span><span class="kd">      EQU</span>     <span class="mh">0x00000400</span>
    
                 <span class="nf">AREA</span>    <span class="nv">STACK</span><span class="p">,</span> <span class="nv">NOINIT</span><span class="p">,</span> <span class="nv">READWRITE</span><span class="p">,</span> <span class="nb">AL</span><span class="nv">IGN</span><span class="err">=</span><span class="mi">3</span>
 <span class="nf">Stack_Mem</span>       <span class="nb">SP</span><span class="nv">ACE</span>   <span class="nv">Stack_Size</span>
 <span class="nf">__initial_sp</span>
</code></pre></div> </div> <p>The <strong><code class="language-plaintext highlighter-rouge">Stack_Size</code></strong> symbolic constant is assigned a value of <strong><code class="language-plaintext highlighter-rouge">0x00000400</code></strong>, representing the stack size in hexadecimal notation. The <strong><code class="language-plaintext highlighter-rouge">AREA</code></strong> directive creates a new section called “STACK” with the attributes <strong><code class="language-plaintext highlighter-rouge">NOINIT</code></strong>, <strong><code class="language-plaintext highlighter-rouge">READWRITE</code></strong>, and <strong><code class="language-plaintext highlighter-rouge">ALIGN=3</code></strong>, indicating that the memory in this section initialized to zero, can be read from and written to, and is aligned on an 8-byte (2^3) boundary. The <strong><code class="language-plaintext highlighter-rouge">Stack_Mem</code></strong> label marks the start of the allocated memory block for the stack, and the <strong><code class="language-plaintext highlighter-rouge">SPACE</code></strong> directive reserves the specified size of memory, in this case <strong><code class="language-plaintext highlighter-rouge">1024</code></strong> bytes . Lastly, the <strong><code class="language-plaintext highlighter-rouge">__initial_sp</code></strong> label represents the initial value of the stack pointer, which is conventionally used to initialize the stack pointer.</p> <ol> <li><strong>Heap Setup:</strong></li> </ol> <p>Similar to the stack setup, the heap setup section allocates memory for the heap. The label <strong><code class="language-plaintext highlighter-rouge">__heap_base</code></strong> denotes the starting address of the allocated memory block for the heap. The <strong><code class="language-plaintext highlighter-rouge">Heap_Mem</code></strong> label is used in conjunction with the <strong><code class="language-plaintext highlighter-rouge">SPACE</code></strong> directive to reserve the specified size of memory for the heap. Additionally, the label <strong><code class="language-plaintext highlighter-rouge">__heap_limit</code></strong> is used to mark the end of the allocated heap memory.</p> <div class="language-nasm highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="no">Heap_Size</span><span class="kd">       EQU</span>     <span class="mh">0x00000200</span>
    
                 <span class="nf">AREA</span>    <span class="nv">HEAP</span><span class="p">,</span> <span class="nv">NOINIT</span><span class="p">,</span> <span class="nv">READWRITE</span><span class="p">,</span> <span class="nb">AL</span><span class="nv">IGN</span><span class="err">=</span><span class="mi">3</span>
 <span class="nf">__heap_base</span>
 <span class="nf">Heap_Mem</span>        <span class="nb">SP</span><span class="nv">ACE</span>   <span class="nv">Heap_Size</span>
 <span class="nf">__heap_limit</span>
    
                 <span class="nf">PRESERVE8</span>
                 <span class="nf">THUMB</span>
</code></pre></div> </div> <p>The <strong><code class="language-plaintext highlighter-rouge">PRESERVE8</code></strong> directive ensures that 8-byte stack alignment is maintained, while the <strong><code class="language-plaintext highlighter-rouge">THUMB</code></strong> directive sets the program execution state to Thumb mode, which is a reduced instruction set encoding used in Arm processors.</p> <ol> <li><strong>Vector Table Initialization:</strong></li> </ol> <p>The vector table initialization is a crucial part of the startup code. It creates the vector table, which stores the addresses of various interrupt service routines (ISRs) and exception handlers.</p> <p>Each entry in the vector table is defined using the <strong><code class="language-plaintext highlighter-rouge">DCD</code></strong> directive, assigning a 32-bit address value to represent the location of the corresponding ISR in memory. The vector table begins with the stack pointer value (<strong><code class="language-plaintext highlighter-rouge">__initial_sp</code></strong>), indicating the top of the stack. It then lists various interrupt and exception handlers, such as reset, NMI, hard fault, memory management fault, bus fault, usage fault, and more. Additionally, the vector table includes entries for external interrupts like ADC, timers, UART, SPI, CAN, and others.</p> <p>To determine the size of the vector table, the symbol <strong><code class="language-plaintext highlighter-rouge">__Vectors_Size</code></strong> is defined by subtracting the address of the start of the vector table (<strong><code class="language-plaintext highlighter-rouge">__Vectors</code></strong>) from the address of the end of the vector table (<strong><code class="language-plaintext highlighter-rouge">__Vectors_End</code></strong>).</p> <div class="language-nasm highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="no">__Vectors_Size</span><span class="kd">  EQU</span>  <span class="nv">__Vectors_End</span> <span class="o">-</span> <span class="nv">__Vectors</span>
    
                 <span class="nf">AREA</span>    <span class="o">|</span><span class="nv">.text</span><span class="o">|</span><span class="p">,</span> <span class="nv">CODE</span><span class="p">,</span> <span class="nv">READONLY</span>
</code></pre></div> </div> <ol> <li><strong>Reset and other Handler Functions</strong></li> </ol> <p>The reset handler routine is responsible for initializing the system after a reset or power-on. It calls the <strong><code class="language-plaintext highlighter-rouge">SystemInit</code></strong> function, which performs hardware initialization, and then transfers control to the <strong><code class="language-plaintext highlighter-rouge">__main</code></strong> function (or ENTRY directive if using assembly). The <strong><code class="language-plaintext highlighter-rouge">__main</code></strong> function serves as the entry point for the application code. By executing these steps in sequence, the reset handler ensures that the system is properly initialized before starting the main application.</p> <div class="language-nasm highlighter-rouge"> <div class="highlight"><pre class="highlight"><code> <span class="c1">; Reset handler</span>
 <span class="nf">Reset_Handler</span>    <span class="nv">PROC</span>
                  <span class="k">EXPORT</span>  <span class="nv">Reset_Handler</span>             <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
         <span class="k">IMPORT</span>  <span class="nv">SystemInit</span>
         <span class="k">IMPORT</span>  <span class="nv">__main</span>
                  <span class="nf">LDR</span>     <span class="nv">R0</span><span class="p">,</span> <span class="err">=</span><span class="nv">SystemInit</span>
                  <span class="nf">BLX</span>     <span class="nv">R0</span>
                  <span class="nf">LDR</span>     <span class="nv">R0</span><span class="p">,</span> <span class="err">=</span><span class="nv">__main</span>
                  <span class="nf">BX</span>      <span class="nv">R0</span>
                  <span class="nf">ENDP</span>
</code></pre></div> </div> <p>The startup code sets up the necessary environment and prepares the microcontroller for the execution of user code. It initializes the stack and heap, configures the vector table, and handles the system reset. These tasks are essential for a well-organized and controlled system initialization in an ARM-based embedded system.</p> </li> </ol> <p><strong>Further Resources:</strong></p> <p><a href="https://community.silabs.com/s/article/understand-the-gnu-assembler-startup-file-of-cortex-m4?language=en_US" rel="external nofollow noopener" target="_blank">Understand the GNU assembler startup file of cortex M4</a></p> <p><a href="https://www.youtube.com/watch?v=2Hm8eEHsgls&amp;ab_channel=FastbitEmbeddedBrainAcademy" rel="external nofollow noopener" target="_blank">Writing MCU startup file from scratch</a></p> <div class="language-nasm highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">;******************** (C) COPYRIGHT 2011 STMicroelectronics ********************</span>
<span class="c1">;* File Name          : startup_stm32f10x_cl.s</span>
<span class="c1">;* Author             : MCD Application Team</span>
<span class="c1">;* Version            : V3.5.1</span>
<span class="c1">;* Date               : 08-September-2021</span>
<span class="c1">;* Description        : STM32F10x Connectivity line devices vector table for MDK-ARM </span>
<span class="c1">;*                      toolchain. </span>
<span class="c1">;*                      This module performs:</span>
<span class="c1">;*                      - Set the initial SP</span>
<span class="c1">;*                      - Set the initial PC == Reset_Handler</span>
<span class="c1">;*                      - Set the vector table entries with the exceptions ISR address</span>
<span class="c1">;*                      - Configure the clock system</span>
<span class="c1">;*                      - Branches to __main in the C library (which eventually</span>
<span class="c1">;*                        calls main()).</span>
<span class="c1">;*                      After Reset the CortexM3 processor is in Thread mode,</span>
<span class="c1">;*                      priority is Privileged, and the Stack is set to Main.</span>
<span class="c1">;* &lt;&lt;&lt; Use Configuration Wizard in Context Menu &gt;&gt;&gt;   </span>
<span class="c1">;*******************************************************************************</span>
<span class="c1">;*</span>
<span class="c1">;* Copyright (c) 2011 STMicroelectronics.</span>
<span class="c1">;* All rights reserved.</span>
<span class="c1">;*</span>
<span class="c1">;* This software is licensed under terms that can be found in the LICENSE file</span>
<span class="c1">;* in the root directory of this software component.</span>
<span class="c1">;* If no LICENSE file comes with this software, it is provided AS-IS.</span>
<span class="c1">;</span>
<span class="c1">;*******************************************************************************</span>

<span class="c1">; Amount of memory (in bytes) allocated for Stack</span>
<span class="c1">; Tailor this value to your application needs</span>
<span class="c1">; &lt;h&gt; Stack Configuration</span>
<span class="c1">;   &lt;o&gt; Stack Size (in Bytes) &lt;0x0-0xFFFFFFFF:8&gt;</span>
<span class="c1">; &lt;/h&gt;</span>

<span class="no">Stack_Size</span><span class="kd">      EQU</span>     <span class="mh">0x00000400</span>

                <span class="nf">AREA</span>    <span class="nv">STACK</span><span class="p">,</span> <span class="nv">NOINIT</span><span class="p">,</span> <span class="nv">READWRITE</span><span class="p">,</span> <span class="nb">AL</span><span class="nv">IGN</span><span class="err">=</span><span class="mi">3</span>
<span class="nf">Stack_Mem</span>       <span class="nb">SP</span><span class="nv">ACE</span>   <span class="nv">Stack_Size</span>
<span class="nf">__initial_sp</span>

<span class="c1">; &lt;h&gt; Heap Configuration</span>
<span class="c1">;   &lt;o&gt;  Heap Size (in Bytes) &lt;0x0-0xFFFFFFFF:8&gt;</span>
<span class="c1">; &lt;/h&gt;</span>

<span class="no">Heap_Size</span><span class="kd">       EQU</span>     <span class="mh">0x00000200</span>

                <span class="nf">AREA</span>    <span class="nv">HEAP</span><span class="p">,</span> <span class="nv">NOINIT</span><span class="p">,</span> <span class="nv">READWRITE</span><span class="p">,</span> <span class="nb">AL</span><span class="nv">IGN</span><span class="err">=</span><span class="mi">3</span>
<span class="nf">__heap_base</span>
<span class="nf">Heap_Mem</span>        <span class="nb">SP</span><span class="nv">ACE</span>   <span class="nv">Heap_Size</span>
<span class="nf">__heap_limit</span>

                <span class="nf">PRESERVE8</span>
                <span class="nf">THUMB</span>

<span class="c1">; Vector Table Mapped to Address 0 at Reset</span>
                <span class="nf">AREA</span>    <span class="nv">RESET</span><span class="p">,</span> <span class="nv">DATA</span><span class="p">,</span> <span class="nv">READONLY</span>
                <span class="k">EXPORT</span>  <span class="nv">__Vectors</span>
                <span class="k">EXPORT</span>  <span class="nv">__Vectors_End</span>
                <span class="k">EXPORT</span>  <span class="nv">__Vectors_Size</span>

<span class="nf">__Vectors</span>       <span class="nv">DCD</span>     <span class="nv">__initial_sp</span>               <span class="c1">; Top of Stack</span>
                <span class="nf">DCD</span>     <span class="nv">Reset_Handler</span>              <span class="c1">; Reset Handler</span>
                <span class="nf">DCD</span>     <span class="nv">NMI_Handler</span>                <span class="c1">; NMI Handler</span>
                <span class="nf">DCD</span>     <span class="nv">HardFault_Handler</span>          <span class="c1">; Hard Fault Handler</span>
                <span class="nf">DCD</span>     <span class="nv">MemManage_Handler</span>          <span class="c1">; MPU Fault Handler</span>
                <span class="nf">DCD</span>     <span class="nv">BusFault_Handler</span>           <span class="c1">; Bus Fault Handler</span>
                <span class="nf">DCD</span>     <span class="nv">UsageFault_Handler</span>         <span class="c1">; Usage Fault Handler</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="nv">SVC_Handler</span>                <span class="c1">; SVCall Handler</span>
                <span class="nf">DCD</span>     <span class="nv">DebugMon_Handler</span>           <span class="c1">; Debug Monitor Handler</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="nv">PendSV_Handler</span>             <span class="c1">; PendSV Handler</span>
                <span class="nf">DCD</span>     <span class="nv">SysTick_Handler</span>            <span class="c1">; SysTick Handler</span>

                <span class="c1">; External Interrupts</span>
                <span class="nf">DCD</span>     <span class="nv">WWDG_IRQHandler</span>            <span class="c1">; Window Watchdog</span>
                <span class="nf">DCD</span>     <span class="nv">PVD_IRQHandler</span>             <span class="c1">; PVD through EXTI Line detect</span>
                <span class="nf">DCD</span>     <span class="nv">TAMPER_IRQHandler</span>          <span class="c1">; Tamper</span>
                <span class="nf">DCD</span>     <span class="nv">RTC_IRQHandler</span>             <span class="c1">; RTC</span>
                <span class="nf">DCD</span>     <span class="nv">FLASH_IRQHandler</span>           <span class="c1">; Flash</span>
                <span class="nf">DCD</span>     <span class="nv">RCC_IRQHandler</span>             <span class="c1">; RCC</span>
                <span class="nf">DCD</span>     <span class="nv">EXTI0_IRQHandler</span>           <span class="c1">; EXTI Line 0</span>
                <span class="nf">DCD</span>     <span class="nv">EXTI1_IRQHandler</span>           <span class="c1">; EXTI Line 1</span>
                <span class="nf">DCD</span>     <span class="nv">EXTI2_IRQHandler</span>           <span class="c1">; EXTI Line 2</span>
                <span class="nf">DCD</span>     <span class="nv">EXTI3_IRQHandler</span>           <span class="c1">; EXTI Line 3</span>
                <span class="nf">DCD</span>     <span class="nv">EXTI4_IRQHandler</span>           <span class="c1">; EXTI Line 4</span>
                <span class="nf">DCD</span>     <span class="nv">DMA1_Channel1_IRQHandler</span>   <span class="c1">; DMA1 Channel 1</span>
                <span class="nf">DCD</span>     <span class="nv">DMA1_Channel2_IRQHandler</span>   <span class="c1">; DMA1 Channel 2</span>
                <span class="nf">DCD</span>     <span class="nv">DMA1_Channel3_IRQHandler</span>   <span class="c1">; DMA1 Channel 3</span>
                <span class="nf">DCD</span>     <span class="nv">DMA1_Channel4_IRQHandler</span>   <span class="c1">; DMA1 Channel 4</span>
                <span class="nf">DCD</span>     <span class="nv">DMA1_Channel5_IRQHandler</span>   <span class="c1">; DMA1 Channel 5</span>
                <span class="nf">DCD</span>     <span class="nv">DMA1_Channel6_IRQHandler</span>   <span class="c1">; DMA1 Channel 6</span>
                <span class="nf">DCD</span>     <span class="nv">DMA1_Channel7_IRQHandler</span>   <span class="c1">; DMA1 Channel 7</span>
                <span class="nf">DCD</span>     <span class="nv">ADC1_2_IRQHandler</span>          <span class="c1">; ADC1 and ADC2</span>
                <span class="nf">DCD</span>     <span class="nv">CAN1_TX_IRQHandler</span>         <span class="c1">; CAN1 TX</span>
                <span class="nf">DCD</span>     <span class="nv">CAN1_RX0_IRQHandler</span>        <span class="c1">; CAN1 RX0</span>
                <span class="nf">DCD</span>     <span class="nv">CAN1_RX1_IRQHandler</span>        <span class="c1">; CAN1 RX1</span>
                <span class="nf">DCD</span>     <span class="nv">CAN1_SCE_IRQHandler</span>        <span class="c1">; CAN1 SCE</span>
                <span class="nf">DCD</span>     <span class="nv">EXTI9_5_IRQHandler</span>         <span class="c1">; EXTI Line 9..5</span>
                <span class="nf">DCD</span>     <span class="nv">TIM1_BRK_IRQHandler</span>        <span class="c1">; TIM1 Break</span>
                <span class="nf">DCD</span>     <span class="nv">TIM1_UP_IRQHandler</span>         <span class="c1">; TIM1 Update</span>
                <span class="nf">DCD</span>     <span class="nv">TIM1_TRG_COM_IRQHandler</span>    <span class="c1">; TIM1 Trigger and Commutation</span>
                <span class="nf">DCD</span>     <span class="nv">TIM1_CC_IRQHandler</span>         <span class="c1">; TIM1 Capture Compare</span>
                <span class="nf">DCD</span>     <span class="nv">TIM2_IRQHandler</span>            <span class="c1">; TIM2</span>
                <span class="nf">DCD</span>     <span class="nv">TIM3_IRQHandler</span>            <span class="c1">; TIM3</span>
                <span class="nf">DCD</span>     <span class="nv">TIM4_IRQHandler</span>            <span class="c1">; TIM4</span>
                <span class="nf">DCD</span>     <span class="nv">I2C1_EV_IRQHandler</span>         <span class="c1">; I2C1 Event</span>
                <span class="nf">DCD</span>     <span class="nv">I2C1_ER_IRQHandler</span>         <span class="c1">; I2C1 Error</span>
                <span class="nf">DCD</span>     <span class="nv">I2C2_EV_IRQHandler</span>         <span class="c1">; I2C2 Event</span>
                <span class="nf">DCD</span>     <span class="nv">I2C2_ER_IRQHandler</span>         <span class="c1">; I2C1 Error</span>
                <span class="nf">DCD</span>     <span class="nb">SP</span><span class="nv">I1_IRQHandler</span>            <span class="c1">; SPI1</span>
                <span class="nf">DCD</span>     <span class="nb">SP</span><span class="nv">I2_IRQHandler</span>            <span class="c1">; SPI2</span>
                <span class="nf">DCD</span>     <span class="nv">USART1_IRQHandler</span>          <span class="c1">; USART1</span>
                <span class="nf">DCD</span>     <span class="nv">USART2_IRQHandler</span>          <span class="c1">; USART2</span>
                <span class="nf">DCD</span>     <span class="nv">USART3_IRQHandler</span>          <span class="c1">; USART3</span>
                <span class="nf">DCD</span>     <span class="nv">EXTI15_10_IRQHandler</span>       <span class="c1">; EXTI Line 15..10</span>
                <span class="nf">DCD</span>     <span class="nv">RTCAlarm_IRQHandler</span>        <span class="c1">; RTC alarm through EXTI line</span>
                <span class="nf">DCD</span>     <span class="nv">OTG_FS_WKUP_IRQHandler</span>     <span class="c1">; USB OTG FS Wakeup through EXTI line</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="mi">0</span>                          <span class="c1">; Reserved</span>
                <span class="nf">DCD</span>     <span class="nv">TIM5_IRQHandler</span>            <span class="c1">; TIM5</span>
                <span class="nf">DCD</span>     <span class="nb">SP</span><span class="nv">I3_IRQHandler</span>            <span class="c1">; SPI3</span>
                <span class="nf">DCD</span>     <span class="nv">UART4_IRQHandler</span>           <span class="c1">; UART4</span>
                <span class="nf">DCD</span>     <span class="nv">UART5_IRQHandler</span>           <span class="c1">; UART5</span>
                <span class="nf">DCD</span>     <span class="nv">TIM6_IRQHandler</span>            <span class="c1">; TIM6</span>
                <span class="nf">DCD</span>     <span class="nv">TIM7_IRQHandler</span>            <span class="c1">; TIM7</span>
                <span class="nf">DCD</span>     <span class="nv">DMA2_Channel1_IRQHandler</span>   <span class="c1">; DMA2 Channel1</span>
                <span class="nf">DCD</span>     <span class="nv">DMA2_Channel2_IRQHandler</span>   <span class="c1">; DMA2 Channel2</span>
                <span class="nf">DCD</span>     <span class="nv">DMA2_Channel3_IRQHandler</span>   <span class="c1">; DMA2 Channel3</span>
                <span class="nf">DCD</span>     <span class="nv">DMA2_Channel4_IRQHandler</span>   <span class="c1">; DMA2 Channel4</span>
                <span class="nf">DCD</span>     <span class="nv">DMA2_Channel5_IRQHandler</span>   <span class="c1">; DMA2 Channel5</span>
                <span class="nf">DCD</span>     <span class="nv">ETH_IRQHandler</span>             <span class="c1">; Ethernet</span>
                <span class="nf">DCD</span>     <span class="nv">ETH_WKUP_IRQHandler</span>        <span class="c1">; Ethernet Wakeup through EXTI line</span>
                <span class="nf">DCD</span>     <span class="nv">CAN2_TX_IRQHandler</span>         <span class="c1">; CAN2 TX</span>
                <span class="nf">DCD</span>     <span class="nv">CAN2_RX0_IRQHandler</span>        <span class="c1">; CAN2 RX0</span>
                <span class="nf">DCD</span>     <span class="nv">CAN2_RX1_IRQHandler</span>        <span class="c1">; CAN2 RX1</span>
                <span class="nf">DCD</span>     <span class="nv">CAN2_SCE_IRQHandler</span>        <span class="c1">; CAN2 SCE</span>
                <span class="nf">DCD</span>     <span class="nv">OTG_FS_IRQHandler</span>          <span class="c1">; USB OTG FS</span>
<span class="nf">__Vectors_End</span>

<span class="no">__Vectors_Size</span><span class="kd">  EQU</span>  <span class="nv">__Vectors_End</span> <span class="o">-</span> <span class="nv">__Vectors</span>

                <span class="nf">AREA</span>    <span class="o">|</span><span class="nv">.text</span><span class="o">|</span><span class="p">,</span> <span class="nv">CODE</span><span class="p">,</span> <span class="nv">READONLY</span>

<span class="c1">; Reset handler</span>
<span class="nf">Reset_Handler</span>    <span class="nv">PROC</span>
                 <span class="k">EXPORT</span>  <span class="nv">Reset_Handler</span>             <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
        <span class="k">IMPORT</span>  <span class="nv">SystemInit</span>
        <span class="k">IMPORT</span>  <span class="nv">__main</span>
                 <span class="nf">LDR</span>     <span class="nv">R0</span><span class="p">,</span> <span class="err">=</span><span class="nv">SystemInit</span>
                 <span class="nf">BLX</span>     <span class="nv">R0</span>
                 <span class="nf">LDR</span>     <span class="nv">R0</span><span class="p">,</span> <span class="err">=</span><span class="nv">__main</span>
                 <span class="nf">BX</span>      <span class="nv">R0</span>
                 <span class="nf">ENDP</span>

<span class="c1">; Dummy Exception Handlers (infinite loops which can be modified)</span>

<span class="nf">NMI_Handler</span>     <span class="nv">PROC</span>
                <span class="k">EXPORT</span>  <span class="nv">NMI_Handler</span>                <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="nf">B</span>       <span class="nv">.</span>
                <span class="nf">ENDP</span>
<span class="nf">HardFault_Handler</span><span class="err">\</span>
                <span class="nf">PROC</span>
                <span class="k">EXPORT</span>  <span class="nv">HardFault_Handler</span>          <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="nf">B</span>       <span class="nv">.</span>
                <span class="nf">ENDP</span>
<span class="nf">MemManage_Handler</span><span class="err">\</span>
                <span class="nf">PROC</span>
                <span class="k">EXPORT</span>  <span class="nv">MemManage_Handler</span>          <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="nf">B</span>       <span class="nv">.</span>
                <span class="nf">ENDP</span>
<span class="nf">BusFault_Handler</span><span class="err">\</span>
                <span class="nf">PROC</span>
                <span class="k">EXPORT</span>  <span class="nv">BusFault_Handler</span>           <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="nf">B</span>       <span class="nv">.</span>
                <span class="nf">ENDP</span>
<span class="nf">UsageFault_Handler</span><span class="err">\</span>
                <span class="nf">PROC</span>
                <span class="k">EXPORT</span>  <span class="nv">UsageFault_Handler</span>         <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="nf">B</span>       <span class="nv">.</span>
                <span class="nf">ENDP</span>
<span class="nf">SVC_Handler</span>     <span class="nv">PROC</span>
                <span class="k">EXPORT</span>  <span class="nv">SVC_Handler</span>                <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="nf">B</span>       <span class="nv">.</span>
                <span class="nf">ENDP</span>
<span class="nf">DebugMon_Handler</span><span class="err">\</span>
                <span class="nf">PROC</span>
                <span class="k">EXPORT</span>  <span class="nv">DebugMon_Handler</span>           <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="nf">B</span>       <span class="nv">.</span>
                <span class="nf">ENDP</span>
<span class="nf">PendSV_Handler</span>  <span class="nv">PROC</span>
                <span class="k">EXPORT</span>  <span class="nv">PendSV_Handler</span>             <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="nf">B</span>       <span class="nv">.</span>
                <span class="nf">ENDP</span>
<span class="nf">SysTick_Handler</span> <span class="nv">PROC</span>
                <span class="k">EXPORT</span>  <span class="nv">SysTick_Handler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="nf">B</span>       <span class="nv">.</span>
                <span class="nf">ENDP</span>

<span class="nf">Default_Handler</span> <span class="nv">PROC</span>

                <span class="k">EXPORT</span>  <span class="nv">WWDG_IRQHandler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">PVD_IRQHandler</span>             <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TAMPER_IRQHandler</span>          <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">RTC_IRQHandler</span>             <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">FLASH_IRQHandler</span>           <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">RCC_IRQHandler</span>             <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">EXTI0_IRQHandler</span>           <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">EXTI1_IRQHandler</span>           <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">EXTI2_IRQHandler</span>           <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">EXTI3_IRQHandler</span>           <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">EXTI4_IRQHandler</span>           <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA1_Channel1_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA1_Channel2_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA1_Channel3_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA1_Channel4_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA1_Channel5_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA1_Channel6_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA1_Channel7_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">ADC1_2_IRQHandler</span>          <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">CAN1_TX_IRQHandler</span>         <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">CAN1_RX0_IRQHandler</span>        <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">CAN1_RX1_IRQHandler</span>        <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">CAN1_SCE_IRQHandler</span>        <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">EXTI9_5_IRQHandler</span>         <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TIM1_BRK_IRQHandler</span>        <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TIM1_UP_IRQHandler</span>         <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TIM1_TRG_COM_IRQHandler</span>    <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TIM1_CC_IRQHandler</span>         <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TIM2_IRQHandler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TIM3_IRQHandler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TIM4_IRQHandler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">I2C1_EV_IRQHandler</span>         <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">I2C1_ER_IRQHandler</span>         <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">I2C2_EV_IRQHandler</span>         <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">I2C2_ER_IRQHandler</span>         <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nb">SP</span><span class="nv">I1_IRQHandler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nb">SP</span><span class="nv">I2_IRQHandler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">USART1_IRQHandler</span>          <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">USART2_IRQHandler</span>          <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">USART3_IRQHandler</span>          <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">EXTI15_10_IRQHandler</span>       <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">RTCAlarm_IRQHandler</span>        <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">OTG_FS_WKUP_IRQHandler</span>     <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TIM5_IRQHandler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nb">SP</span><span class="nv">I3_IRQHandler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">UART4_IRQHandler</span>           <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">UART5_IRQHandler</span>           <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TIM6_IRQHandler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">TIM7_IRQHandler</span>            <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA2_Channel1_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA2_Channel2_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA2_Channel3_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA2_Channel4_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">DMA2_Channel5_IRQHandler</span>   <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">ETH_IRQHandler</span>             <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">ETH_WKUP_IRQHandler</span>        <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">CAN2_TX_IRQHandler</span>         <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">CAN2_RX0_IRQHandler</span>        <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">CAN2_RX1_IRQHandler</span>        <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">CAN2_SCE_IRQHandler</span>        <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>
                <span class="k">EXPORT</span>  <span class="nv">OTG_FS_IRQHandler</span>          <span class="p">[</span><span class="nv">WEAK</span><span class="p">]</span>

<span class="nf">WWDG_IRQHandler</span>
<span class="nf">PVD_IRQHandler</span>
<span class="nf">TAMPER_IRQHandler</span>
<span class="nf">RTC_IRQHandler</span>
<span class="nf">FLASH_IRQHandler</span>
<span class="nf">RCC_IRQHandler</span>
<span class="nf">EXTI0_IRQHandler</span>
<span class="nf">EXTI1_IRQHandler</span>
<span class="nf">EXTI2_IRQHandler</span>
<span class="nf">EXTI3_IRQHandler</span>
<span class="nf">EXTI4_IRQHandler</span>
<span class="nf">DMA1_Channel1_IRQHandler</span>
<span class="nf">DMA1_Channel2_IRQHandler</span>
<span class="nf">DMA1_Channel3_IRQHandler</span>
<span class="nf">DMA1_Channel4_IRQHandler</span>
<span class="nf">DMA1_Channel5_IRQHandler</span>
<span class="nf">DMA1_Channel6_IRQHandler</span>
<span class="nf">DMA1_Channel7_IRQHandler</span>
<span class="nf">ADC1_2_IRQHandler</span>
<span class="nf">CAN1_TX_IRQHandler</span>
<span class="nf">CAN1_RX0_IRQHandler</span>
<span class="nf">CAN1_RX1_IRQHandler</span>
<span class="nf">CAN1_SCE_IRQHandler</span>
<span class="nf">EXTI9_5_IRQHandler</span>
<span class="nf">TIM1_BRK_IRQHandler</span>
<span class="nf">TIM1_UP_IRQHandler</span>
<span class="nf">TIM1_TRG_COM_IRQHandler</span>
<span class="nf">TIM1_CC_IRQHandler</span>
<span class="nf">TIM2_IRQHandler</span>
<span class="nf">TIM3_IRQHandler</span>
<span class="nf">TIM4_IRQHandler</span>
<span class="nf">I2C1_EV_IRQHandler</span>
<span class="nf">I2C1_ER_IRQHandler</span>
<span class="nf">I2C2_EV_IRQHandler</span>
<span class="nf">I2C2_ER_IRQHandler</span>
<span class="nf">SPI1_IRQHandler</span>
<span class="nf">SPI2_IRQHandler</span>
<span class="nf">USART1_IRQHandler</span>
<span class="nf">USART2_IRQHandler</span>
<span class="nf">USART3_IRQHandler</span>
<span class="nf">EXTI15_10_IRQHandler</span>
<span class="nf">RTCAlarm_IRQHandler</span>
<span class="nf">OTG_FS_WKUP_IRQHandler</span>
<span class="nf">TIM5_IRQHandler</span>
<span class="nf">SPI3_IRQHandler</span>
<span class="nf">UART4_IRQHandler</span>
<span class="nf">UART5_IRQHandler</span>
<span class="nf">TIM6_IRQHandler</span>
<span class="nf">TIM7_IRQHandler</span>
<span class="nf">DMA2_Channel1_IRQHandler</span>
<span class="nf">DMA2_Channel2_IRQHandler</span>
<span class="nf">DMA2_Channel3_IRQHandler</span>
<span class="nf">DMA2_Channel4_IRQHandler</span>
<span class="nf">DMA2_Channel5_IRQHandler</span>
<span class="nf">ETH_IRQHandler</span>
<span class="nf">ETH_WKUP_IRQHandler</span>
<span class="nf">CAN2_TX_IRQHandler</span>
<span class="nf">CAN2_RX0_IRQHandler</span>
<span class="nf">CAN2_RX1_IRQHandler</span>
<span class="nf">CAN2_SCE_IRQHandler</span>
<span class="nf">OTG_FS_IRQHandler</span>

                <span class="nf">B</span>       <span class="nv">.</span>

                <span class="nf">ENDP</span>

                <span class="k">ALIGN</span>

<span class="c1">;*******************************************************************************</span>
<span class="c1">; User Stack and Heap initialization</span>
<span class="c1">;*******************************************************************************</span>
                 <span class="nf">IF</span>      <span class="p">:</span><span class="nv">DEF</span><span class="p">:</span><span class="nv">__MICROLIB</span>
                
                 <span class="k">EXPORT</span>  <span class="nv">__initial_sp</span>
                 <span class="k">EXPORT</span>  <span class="nv">__heap_base</span>
                 <span class="k">EXPORT</span>  <span class="nv">__heap_limit</span>
                
                 <span class="nf">ELSE</span>
                
                 <span class="k">IMPORT</span>  <span class="nv">__use_two_region_memory</span>
                 <span class="k">EXPORT</span>  <span class="nv">__user_initial_stackheap</span>
                 
<span class="nf">__user_initial_stackheap</span>

                 <span class="nf">LDR</span>     <span class="nv">R0</span><span class="p">,</span> <span class="err">=</span>  <span class="nv">Heap_Mem</span>
                 <span class="nf">LDR</span>     <span class="nv">R1</span><span class="p">,</span> <span class="err">=</span><span class="p">(</span><span class="nv">Stack_Mem</span> <span class="o">+</span> <span class="nv">Stack_Size</span><span class="p">)</span>
                 <span class="nf">LDR</span>     <span class="nv">R2</span><span class="p">,</span> <span class="err">=</span> <span class="p">(</span><span class="nv">Heap_Mem</span> <span class="o">+</span>  <span class="nv">Heap_Size</span><span class="p">)</span>
                 <span class="nf">LDR</span>     <span class="nv">R3</span><span class="p">,</span> <span class="err">=</span> <span class="nv">Stack_Mem</span>
                 <span class="nf">BX</span>      <span class="nv">LR</span>

                 <span class="k">ALIGN</span>

                 <span class="nf">ENDIF</span>

                 <span class="nf">END</span>
</code></pre></div></div> </article> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 Mehmet Bozdal. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js" integrity="sha256-fgLAgv7fyCGopR/gBNq2iW3ZKIdqIcyshnUULC4vex8=" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js" integrity="sha256-EdPgYcPk/IIrw7FYeuJQexva49pVRZNmt3LculEr7zM=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js"></script> <script defer src="/assets/js/common.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>